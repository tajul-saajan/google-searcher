<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/public/css/base.css">
  <title>Search Results</title>
</head>
<body class=" p-8">
<script src="/public/jquery.min.js"></script>
<!-- CSV Upload Form -->
<div class="mb-8">
  <form method="post" action="/search" enctype="multipart/form-data" class="bg-white p-4 rounded-md shadow-sm">
    <div class="mb-4 flex">
      <input required type="file" name="file" class="border p-2 rounded" accept=".csv">
      <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Upload Csv File
      </button>
    </div>
    {{#if success}}
      <div class="my-1 text-green-600">
        {{ message }}
      </div>
    {{/if}}
  </form>
</div>

<!-- Search Form -->
<div class="mb-8">
  <form class="bg-white p-4 rounded-md shadow-sm" method="get" action="search-stat">
    <div class="flex mb-4">
      <input type="text" name="search" placeholder="Search..." class="border p-2 rounded">
      <button id="btn" type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
        Search
      </button>
    </div>
  </form>
</div>

<!-- Table with Pagination -->
<div class="bg-white p-4 rounded-md shadow-sm mb-8">
  <div class="mb-4">
    <div class="font-bold text-2xl">Result Stats</div>
    <div class="flex justify-between my-1 py-2 text-white bg-blue-500 px-4  border rounded">
      <div>Items Per Page: <span class="font-bold">{{ results.meta.itemsPerPage}}</span></div>
      <div>Total Items: <span class="font-bold">{{ results.meta.totalItems}}</span></div>
      <div>Current Page: <span class="font-bold">{{ results.meta.currentPage}}</span></div>
      <div>Total Pages: <span class="font-bold">{{ results.meta.totalPages}}</span></div>
    </div>
  </div>
  <table class="min-w-full leading-normal">
    <!-- Table Head -->
    <caption class="text-gray-700 font-bold">
      <div class="text-3xl">Search Data</div>
    </caption>
    <thead>
    <tr>
      <th class="px-5 py-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
        Keyword
      </th>
      <th class="px-5 py-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
        Ads Count
      </th>
      <th class="px-5 py-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
        Links Count
      </th>
      <th class="px-5 py-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
        Total Results Count
      </th>
      <th class="px-5 py-3 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
        Action
      </th>
      <!-- More table headers -->
    </tr>
    </thead>
    <!-- Table Body -->
    <tbody>
    {{#each results.data}}
      <tr>
        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
          {{keyword}}
        </td>
        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
          {{adsCount}}
        </td>
        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
          {{linksCount}}
        </td>
        <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
          {{totalResultsCount}}
        </td>
        <td class="px-5 py-5 border-b border-gray-200 text-sm">
          <button onclick="loadUrl({{id}})" class="p-2 bg-blue-500 hover:bg-blue-900 text-white border rounded-md">
            view
          </button>
        </td>
        <!-- More table data -->
      </tr>
    {{/each}}
    <!-- More rows -->
    </tbody>
  </table>
  <!-- Pagination Links -->
  <div class="px-5 py-5 bg-white border-t flex flex-col xs:flex-row items-center xs:justify-between">
    <!-- Replace with your pagination component -->
    <div class="inline-flex mt-2 xs:mt-0">
      <a href="{{results.links.previous}}"
         class="text-sm text-indigo-500 leading-none rounded hover:underline">Previous</a>
      <a href="{{results.links.next}}" onclick="loadUrl()"
         class="text-sm text-indigo-500 leading-none rounded hover:underline ml-3">Next</a>
    </div>
  </div>
  <script>
    $(document).ready(function() {
      function oop() {
        console.log("ppp");

      }

    });

    function loadUrl(id) {
      console.log("qq", id);
      window.location.href =`http://localhost:3010/search-stat/details/${id}`
    }

  </script>
</div>
</body>
</html>
